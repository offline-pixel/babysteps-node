(self.webpackChunkui=self.webpackChunkui||[]).push([[122],{9341:(e,t,r)=>{"use strict";function n(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}r.d(t,{J:()=>l});var o=r(639),s=r(1841),i=r(6215),a=r(2340);let u=(()=>{class e{constructor(e){this.http=e,this.auth=""}setHeaders(){return{headers:new s.WM({"Content-Type":"application/json",Accept:"application/json"}),reportProgress:!0,withCredentials:!0}}general(e){const t=new s.aW(e.type,`${a.n}${e.version}${e.endpoint}`,e.toServer);return this.http.request(t)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=r(6653);let l=(()=>{class e{constructor(e,t){this._api=e,this._route=t,this.epd=new o.vpe,this.eiui=new o.vpe,this.$button=new i.X(0),this.multiOffers=new i.X(0),this.$temp=new i.X(0)}HttpEventResponse(e){switch(e.type){case s.dt.Sent:case s.dt.ResponseHeader:break;case s.dt.DownloadProgress:this.loading=Math.round(e.loaded/1024);break;case s.dt.Response:return e.body}}callGeneral(e){"login"==e.func||"register"==e.func||"forgotpassword"==e.func?this.common(e):"offers"==e.func?this.offers(e):"upInvoice"==e.func?this.upInvoice(e):"userinvoices"==e.func&&this.getUserInvoices(e)}getUserInvoices(e){this._api.general(e).subscribe(e=>{let t=this.HttpEventResponse(e);4===e.type&&console.log(t)},e=>{})}common(e){let t;"login"==e.func&&(t="upload"),"register"==e.func&&(t="dashboard"),"forgotpassword"==e.func&&(t="check-email"),this._api.general(e).subscribe(r=>{let n=this.HttpEventResponse(r);if(4===r.type){const r=n;"login"!=e.func&&"register"!=e.func||localStorage.setItem("token",r.t),this.$button.next({arr:r,loaded:1,_route:t})}},e=>{this.$button.next({error:e.error.error,loaded:0})})}profile(e){this._api.general(e).subscribe(e=>{let t=this.HttpEventResponse(e);if(4===e.type){const e=t;this.epd.emit({arr:e,loaded:1}),console.log(e)}},e=>{this.epd.emit({error:e.error.error,loaded:0})})}offers(e){var t=this;this._api.general(e).subscribe(function(){var e,r=(e=function*(e){let r=t.HttpEventResponse(e);if(4===e.type){const e=yield t.doExpandJSON(r);t.multiOffers.next({arr:e,loaded:1})}},function(){var t=this,r=arguments;return new Promise(function(o,s){var i=e.apply(t,r);function a(e){n(i,o,s,a,u,"next",e)}function u(e){n(i,o,s,a,u,"throw",e)}a(void 0)})});return function(e){return r.apply(this,arguments)}}(),e=>{this.multiOffers.next({error:e.error.error,loaded:0})})}upInvoice(e){this._api.general(e).subscribe(e=>{let t=this.HttpEventResponse(e);4===e.type&&(this.eiui.emit({arr:t,loaded:1}),this._route.navigate(["/dashboard"]))},e=>{this.eiui.emit({error:e.error.error,loaded:0})})}doExpandJSON(e){let t={},r=[],n=e.n.split("~");return e.d.map(e=>{t={};for(let r=0;r<n.length;r++){let o=e.split("~")[r];if("_"==n[r].substr(n[r].length-1)){const e=o.split("*");")"==e[e.length-1].substr(e[e.length-1].length-1)&&console.log(e),t[n[r]]=o.split("*")}else t[n[r]]=o}r.push(t)}),r}npmIdbLib(e){}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(u),o.LFG(c.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{UploadBillModule:()=>c});var n=r(8583),o=r(6653),s=r(639),i=r(9341);const a=[{path:"",component:(()=>{class e{constructor(e){this._mid=e,this.usData=this._mid.eiui.subscribe(e=>{e.loaded||alert(e.error),e.loaded&&console.log(e)})}ngOnInit(){}getFileName(e){e.target.files.length>0&&this.pdfToBase64(e.target.files[0],e=>{this._mid.upInvoice({type:"POST",endpoint:"/affiliate/userinvoices",version:"/v1",func:"",toServer:{b64ToBuffer:e.target.result},headers:null})})}pdfToBase64(e,t){let r=new FileReader;r.onload=t,r.readAsDataURL(e)}ngOnDestroy(){this.usData.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.J))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-bill"]],decls:27,vars:0,consts:[[1,"flex-container"],[1,"usp"],["data-aos","fade-up","data-aos-duration","800",1,"h1"],["href","https://www.amazon.in","target","_blank"],["data-aos","fade-up","data-aos-duration","1000",1,"h5"],["routerLink","/home",1,"cta"],["data-aos","fade-up","data-aos-duration","1200",1,""],[1,"cta",3,"click"],["type","file","accept","application/pdf",1,"hidden",3,"change"],["file",""]],template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h1",2),s._uU(3," Recently, bought products from "),s.TgZ(4,"a",3),s._uU(5,"Amazon.in"),s.qZA(),s.qZA(),s.TgZ(6,"h5",4),s.TgZ(7,"span"),s._uU(8,"from our selected "),s.TgZ(9,"a",5),s._uU(10,"offers*"),s.qZA(),s._uU(11," After purchase,"),s._UZ(12,"br"),s._uU(13,"follow the simple steps below"),s.qZA(),s.qZA(),s._UZ(14,"br"),s._UZ(15,"br"),s.TgZ(16,"div",6),s.TgZ(17,"sup"),s._uU(18,"Step 1."),s.qZA(),s.TgZ(19,"div"),s.TgZ(20,"a",7),s.NdJ("click",function(){return s.CHM(e),s.MAs(23).click()}),s._uU(21,"Upload Bill"),s.qZA(),s.TgZ(22,"input",8,9),s.NdJ("change",function(e){return t.getFileName(e)}),s.qZA(),s._UZ(24,"div"),s._UZ(25,"br"),s._UZ(26,"br"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}},directives:[o.yS],styles:[""]}),e})()}];let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(a)],o.Bz]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,u]]}),e})()}}]);